# Print CRM (PDCRM)

CRM/ERP-—Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∏ –∏ —Å—É–≤–µ–Ω–∏—Ä–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞.  
–ü–æ–º–æ–≥–∞–µ—Ç –≤–µ—Å—Ç–∏ –∑–∞–∫–∞–∑—ã, –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—É –ø—Ä–æ–¥—É–∫—Ü–∏–∏, —Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–∏—Ä–∞–∂–µ–π –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞.

---

## üéØ –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –∂–∏–∑–Ω—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É.
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ —Ä–∞—Å—á—ë—Ç–∞—Ö –∏ –¥–µ–¥–ª–∞–π–Ω–∞—Ö.
- –î–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –ø–æ –≤—ã—Ä—É—á–∫–µ, –∑–∞–≥—Ä—É–∑–∫–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

---

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (Phase 2 ‚Äî Auth, Header & Theme/Notifications)

–°–æ–±—Ä–∞–Ω —Ä–∞–±–æ—á–∏–π –∫–∞—Ä–∫–∞—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π, –±–∞–∑–æ–≤–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –∏ –æ–±—â–∏–º layout.

### Backend

- Node.js + Express + SQLite (—á–µ—Ä–µ–∑ Knex).
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `backend/knexfile.js` (SQLite-—Ñ–∞–π–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ `./data/dev.sqlite3`).
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–∏–¥—ã:
  - —Ç–∞–±–ª–∏—Ü–∞ `users` —Å –ø–æ–ª—è–º–∏: `id`, `name`, `role`, `access_code_hash`, `is_active`, timestamps;
  - —Å–∏–¥ `001_users.js` —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∑–∞—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∫–æ–¥–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
  - `POST /api/auth/login` ‚Äî –ø—Ä–∏—ë–º –∫–æ–¥–∞ –¥–æ—Å—Ç—É–ø–∞, –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤—ã–¥–∞—á–∞ JWT + –ø—Ä–æ—Ñ–∏–ª—è (`id`, `name`, `role`);
  - `GET /api/auth/me` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É `Authorization: Bearer <token>`;
  - middleware –≤–∫–ª—é—á–∞–µ—Ç `PRAGMA foreign_keys = ON` –¥–ª—è SQLite.
- JWT:
  - —Å–µ–∫—Ä–µ—Ç `JWT_SECRET` —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ `.env` (fallback ‚Äî `dev-secret-change-me`);
  - —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞ ‚Äî 7 –¥–Ω–µ–π.

### Frontend

- Vue 3 + Vite + Vue Router + Pinia.
- Pinia-store `auth`:
  - —Ö—Ä–∞–Ω–∏—Ç `token` –∏ `user` –≤ `localStorage`;
  - —É–º–µ–µ—Ç –ª–æ–≥–∏–Ω–∏—Ç—å—Å—è (`/api/auth/login`), –ø–æ–¥—Ç—è–≥–∏–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (`/api/auth/me`) –∏ —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞—Ç—å—Å—è.
- Router:
  - –ø—É–±–ª–∏—á–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç `/login`;
  - –≤—Å–µ —Ä–∞–±–æ—á–∏–µ —Ä–∞–∑–¥–µ–ª—ã (`/dashboard`, `/orders`, `/cash`, `/warehouse`, `/staff`, `/analytics`, `/directories`, `/settings`, `/permissions`) –∑–∞—â–∏—â–µ–Ω—ã `requiresAuth`;
  - guard:
    - –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ ‚Äî —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`;
    - –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ç–æ–∫–µ–Ω–∞ –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –∑–∞–ø—Ä–æ—Å `/api/auth/me`;
    - –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å `/login` –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ `/dashboard`.

### UI –∏ layout

- –û–±—â–∏–π layout `MainLayout`:
  - –ª–µ–≤–æ–µ —Ç—ë–º–Ω–æ–µ –º–µ–Ω—é —Å–æ —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—É–Ω–∫—Ç–∞–º–∏ (–û—Å–Ω–æ–≤–Ω—ã–µ, –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ, –°–∏—Å—Ç–µ–º–Ω—ã–µ);
  - –ø–æ–∏—Å–∫ –ø–æ –ø—É–Ω–∫—Ç–∞–º –º–µ–Ω—é;
  - –∫–Ω–æ–ø–∫–∞ ¬´–í—ã–π—Ç–∏¬ª (–≤—ã–∑—ã–≤–∞–µ—Ç `auth.logout()` –∏ –ø–µ—Ä–µ–∫–∏–¥—ã–≤–∞–µ—Ç –Ω–∞ `/login`).
- –•–µ–¥–µ—Ä `AppHeader`:
  - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ: ¬´–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ/–¥–µ–Ω—å/–≤–µ—á–µ—Ä, {–ò–º—è}!¬ª
  - –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫ —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∏–∑ `meta` —Ä–æ—É—Ç–µ—Ä–∞;
  - –±–µ–π–¥–∂ —Ä–æ–ª–∏: ¬´–î–∏–∑–∞–π–Ω¬ª, ¬´–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ¬ª, ¬´–î–∏—Ä–µ–∫—Ç–æ—Ä¬ª, ¬´–ê–¥–º–∏–Ω¬ª;
  - –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ—Ä–∞–∑–∞ (–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏, —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω–¥–µ–∫—Å –≤ `localStorage`);
  - —Ç—Ä–∏ —Å–µ—Ä—ã—Ö –∫—Ä—É–≥–∞ —Å–ø—Ä–∞–≤–∞:
    - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã (‚òÄÔ∏è/üåô) —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤ `localStorage`;
    - –∏–∫–æ–Ω–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –¥—Ä–æ–ø–¥–∞—É–Ω–æ–º ¬´–ù–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π¬ª (–≥–æ—Ç–æ–≤–æ –ø–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é);
    - —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –∫—Ä—É–≥ ¬´‚ãÆ¬ª –ø–æ–¥ –±—É–¥—É—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏.

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è / —Ç–µ—Å—Ç–æ–≤—ã–µ –∫–æ–¥—ã

–ù–∞ —Å—Ç–∞—Ä—Ç–µ –±–∞–∑–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç 11 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

- –î–∏–∑–∞–π–Ω–µ—Ä—ã ‚Äî –∫–æ–¥ `1111` (5 —Ä–∞–∑–Ω—ã—Ö –∏–º—ë–Ω).
- –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ ‚Äî –∫–æ–¥ `2222` (4 —Ä–∞–∑–Ω—ã—Ö —Ü–µ—Ö–∞).
- –î–∏—Ä–µ–∫—Ç–æ—Ä ‚Äî –∫–æ–¥ `3333`.
- –ê–¥–º–∏–Ω ‚Äî –∫–æ–¥ `4444`.

–ü—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –µ–≥–æ —Ä–æ–ª—å –∏ –∏–º—è –∏ —Å–æ–∑–¥–∞—ë—Ç —Å–µ—Å—Å–∏—é.

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# Backend
cd backend
cp .env.example .env   # –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –ø—É—Ç–∏ –∫ –ë–î –∏ JWT_SECRET
npm install
npm run migrate
npm run seed
npm run dev

# Frontend (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd frontend
npm install
npm run dev
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç Vite (–æ–±—ã—á–Ω–æ `http://localhost:5173`).  
Backend-—Å–µ—Ä–≤–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç `4000` –∏ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `/api/...`.

–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞ –≤–≤–µ–¥–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `1111`, —á—Ç–æ–±—ã –≤–æ–π—Ç–∏ –∫–∞–∫ –¥–∏–∑–∞–π–Ω–µ—Ä –∏ —É–≤–∏–¥–µ—Ç—å —Ä–∞–±–æ—á–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –º–µ–Ω—é –∏ —Ö–µ–¥–µ—Ä–æ–º.
